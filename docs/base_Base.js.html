<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: base/Base.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: base/Base.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import chroma from 'chroma-js'
import Validator from '../Validator'

/**
 * @typedef {object} BaseOptions - Base component's configuration object
 * @property {string} interpolation - 'linear' or 'bezier'
 * @property {string} mode - 'none', 'lch', 'lab', 'rgb', 'hsv', 'hsl', 'hsi', or 'hcl'
 * @property {number} samples - number of output colors
 * @property {boolean} lightnessCorrection - lightness correction applier
 */

/**
 * @class Base
 * @classdesc provides base array of gradient data
 * @param {string[]} colors - input colors
 * @param {BaseOptions} options - base configuration object
 */
export default class Base {
    constructor(colors, options) {
        this.colors = colors
        this.options = options

        /**
         * @property {Validator} _validator - Valiator class instance 
         */
        this._validator = new Validator()
        this._validator._validateColors(this.colors)
        this._validator._validateOptions(this.options)
    }

    /**
     * @returns {number[][]}
     * @description
     * It returns an array of arrays of normalized rgba values
     * @protected
     */
    get base() {
        const scale = this._createScale()
        const base = this._createBase(scale)
        return this._normalize(base)
    }

    /**
     * @returns {void}
     * Returns chroma.js scale
     * @private 
     */
    _createScale() {
        switch (this.options.interpolation) {
        case 'linear':
            return this._linearInterpolationScale()
        case 'bezier':
            return this._bezierInterpolationScale()
        default:
            return
        }
    }

    /**
     * @returns {any[]}
     * @param {void} scale - chroma.js scale
     * @private 
     */
    _createBase(scale) {
        const base = []
        for (let i = 0; i &lt; this.options.samples; i++) {
            base.push(scale(i / this.options.samples))
        }
        return base
    }

    /**
     * @returns {void} - linear interpolation chroma.js scale
     * @private
     */
    _linearInterpolationScale() {
        if (this.options.mode !== 'none') {
            if (this.options.lightnessCorrection) {
                return chroma
                    .scale(this.colors)
                    .mode(this.options.mode)
                    .correctLightness()
            } else {
                return chroma
                    .scale(this.colors)
                    .mode(this.options.mode)
            }
        } else {
            if (this.options.lightnessCorrection) {
                return chroma
                    .scale(this.colors)
                    .correctLightness()
            } else {
                return chroma
                    .scale(this.colors)
            }
        }
    }

    /**
     * @returns {void} - bezier interpolation chroma.js scale
     * @private
     */
    _bezierInterpolationScale() {
        if (this.options.lightnessCorrection) {
            return chroma
                .bezier(this.colors)
                .scale()
                .correctLightness()
        } else {
            return chroma
                .bezier(this.colors)
        }
    }

    /**
     * 
     * @param {any} entry
     * Helps with filtering out the clipped boolean values from the chroma base object
     * @private
     */
    _removeClippedValues(entry) {
        if (typeof entry !== 'boolean') {
            return entry
        }
    }

    /**
     * @return {number[]}
     * @param {any} base
     * Removes clipped values and rounds the rgba values up to to the second position 
     * @private
     */
    _normalize(base) {
        return base
            .map(entry => entry._rgb)
            .map(entry => entry.filter(c => this._removeClippedValues(c)))
            .map(entry => entry.map(c => this._roundRgbaValues(c)))
    }

    /**
     * @returns {number}
     * @param {number} val 
     * Rounds the rgba values up to to the second position
     * @private
     */
    _roundRgbaValues(val) {
        return Math.round(val * 100) / 100
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Base.html">Base</a></li><li><a href="CssOverlay.html">CssOverlay</a></li><li><a href="GradientMaker.html">GradientMaker</a></li><li><a href="SvgOverlay.html">SvgOverlay</a></li></ul><h3>Global</h3><ul><li><a href="global.html#base">base</a></li><li><a href="global.html#concat">concat</a></li><li><a href="global.html#gradient">gradient</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Jul 08 2018 13:30:33 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
